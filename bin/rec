#!/usr/bin/env sh

if [ $# -eq 0 ]; then
    printf "Filename: "
    read -r filename
else
    filename="$1"
fi

if [ -z "$filename" ]; then
    echo "Error: No filename provided"
    exit 1
fi

filename=$(echo "$filename" | sed 's/ /-/g')

# add .mp4 extension if not present
case "$filename" in
    *.mp4) ;;
    *) filename="${filename}.mp4" ;;
esac

echo "Recording to: $filename"
# Set WAYLAND_DISPLAY for Wayland sessions
export WAYLAND_DISPLAY=wayland-0
gpu-screen-recorder -w screen -f 30 -a default_output -cursor no -o "$filename"
